<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Media | Deepfake Detector</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="upload.css">
</head>

<body>

<div class="upload-container">

  <h2>Upload your media</h2>
  <p>Select an image or video to detect AI manipulation</p>

  <!-- Upload Box -->
  <div class="upload-box" id="upload-box">
    <input type="file" id="fileInput" accept="image/*,video/*">
    <p>Drag & Drop or Click to Upload</p>
    <div id="preview"></div>
  </div>

  <button class="scan-btn" id="scanBtn">Start Scan</button>

  <!-- Loader -->
  <div class="loader" id="loader">
    <div class="dot dot1"></div>
    <div class="dot dot2"></div>
    <div class="dot dot3"></div>
  </div>

</div>


<script>
// Elements
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const loader = document.getElementById('loader');
const scanBtn = document.getElementById('scanBtn');

// Hide loader initially
loader.style.display = "none";

// Trigger input click when upload box clicked
const uploadBox = document.getElementById('upload-box');
uploadBox.addEventListener('click', function(){
    fileInput.click();
});

// Preview selected file
fileInput.addEventListener('change', function(){
    preview.innerHTML = "";
    const file = this.files[0];
    if(!file) return;

    if(file.type.startsWith("image/")){
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        img.style.width = "200px";
        img.style.borderRadius = "10px";
        preview.appendChild(img);
    } else if(file.type.startsWith("video/")){
        const vid = document.createElement("video");
        vid.src = URL.createObjectURL(file);
        vid.controls = true;
        vid.width = 250;
        vid.style.borderRadius = "10px";
        preview.appendChild(vid);
    }
});

// Start Scan â†’ show loader + redirect to result
scanBtn.addEventListener('click', function(){
    if(fileInput.files.length === 0){
        alert("Please choose a file first!");
        return false;
    }
    sessionStorage.setItem("aiResult", "87");
    window.location.href = "result.html";

    loader.style.display = "flex";
    scanBtn.disabled = true;

    // Simulate scan
    setTimeout(() => {
        loader.style.display = "none";
        scanBtn.disabled = false;

        // Redirect to result page
        window.location.href = "result.html";
    }, 3000);
});


</script>

</body>
</html>

